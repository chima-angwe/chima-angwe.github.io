const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MessagesList-CNBgBaKZ.js","assets/index-Bc1wNwMh.js","assets/index-DU1I9C-c.css","assets/formatDate-ClDaI8Qs.js","assets/MessageDetail-DAkXcy64.js"])))=>i.map(i=>d[i]);
import{r as a,j as e,h as g,_ as n}from"./index-Bc1wNwMh.js";import{u as h,E as u}from"./ErrorMessage-B7ApYU-n.js";import{m as x,d as j,g as f}from"./contactService-CiOlnOuh.js";const _=a.lazy(()=>n(()=>import("./MessagesList-CNBgBaKZ.js"),__vite__mapDeps([0,1,2,3]))),p=a.lazy(()=>n(()=>import("./MessageDetail-DAkXcy64.js"),__vite__mapDeps([4,1,2,3]))),y=()=>e.jsxs("div",{className:"messages-layout",children:[e.jsx("div",{className:"loader-skeleton",style:{height:"400px",flex:1}}),e.jsx("div",{className:"loader-skeleton",style:{height:"400px",flex:1}})]}),N=()=>{const[t,r]=a.useState(null),{data:o,loading:d,error:i,refetch:l}=h(f),c=async s=>{try{await x(s),l()}catch{alert("Failed to mark as read")}},m=async s=>{if(window.confirm("Are you sure you want to delete this message?"))try{await j(s),t?._id===s&&r(null),l()}catch{alert("Failed to delete message")}};return d?e.jsx(g,{fullScreen:!0,size:"large"}):i?e.jsx(u,{message:i,onRetry:l}):e.jsxs("div",{className:"view-messages-page",children:[e.jsxs("div",{className:"messages-header",children:[e.jsx("h1",{className:"messages-title",children:"Contact Messages"}),e.jsxs("p",{className:"messages-subtitle",children:[o?.filter(s=>!s.read).length||0," unread messages"]})]}),e.jsx(a.Suspense,{fallback:e.jsx(y,{}),children:e.jsxs("div",{className:"messages-layout",children:[e.jsx(_,{messages:o,selectedMessage:t,onSelectMessage:r,onMarkRead:c}),e.jsx(p,{message:t,onDelete:m})]})})]})};export{N as default};
