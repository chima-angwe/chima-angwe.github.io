import{r as l,j as a,h as P,m as s,e as U,f as L,g as H}from"./index-Ctl3OINq.js";import{u as A,E as F}from"./ErrorMessage-DHev1uHZ.js";import{g as R}from"./galleryService--h1KvTzG.js";import{A as T}from"./index-Cmy4rXYY.js";const z=()=>{const[d,u]=l.useState(null),[c,n]=l.useState(0),[r,x]=l.useState(null),[j,v]=l.useState(null),[f,w]=l.useState(0),{data:o,loading:b,error:N,refetch:k}=A(R),S=e=>{u(e),n(0),document.body.style.overflow="hidden"},h=()=>{u(null),n(0),document.body.style.overflow="unset"},t=o?.find(e=>e._id===d),g=t&&t.imageUrls.length>1,m=()=>{t&&n(e=>e===t.imageUrls.length-1?0:e+1)},y=()=>{t&&n(e=>e===0?t.imageUrls.length-1:e-1)},E=e=>{x(e.targetTouches[0].clientX)},I=e=>{v(e.targetTouches[0].clientX),r&&w(e.targetTouches[0].clientX-r)},C=()=>{if(!r||!j)return;const e=r-j,i=e>50,p=e<-50;i&&m(),p&&y(),x(null),v(null),w(0)};return l.useEffect(()=>{const e=i=>{d!==null&&(i.key==="ArrowRight"&&m(),i.key==="ArrowLeft"&&y(),i.key==="Escape"&&h())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[d,t]),b?a.jsx("section",{className:"gallery-section",children:a.jsx(P,{size:"large"})}):N?a.jsx("section",{className:"gallery-section",children:a.jsx(F,{message:N,onRetry:k})}):!o||o.length===0?null:a.jsxs("section",{className:"gallery-section",children:[a.jsxs(s.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},children:[a.jsx("h2",{className:"gallery-section-title",children:"Photo Gallery"}),a.jsx("p",{className:"gallery-section-subtitle",children:"A glimpse into my journey, work, and experiences"})]}),a.jsx(s.div,{className:"gallery-grid",children:o.map(e=>a.jsxs(s.div,{className:"gallery-item",onClick:()=>S(e._id),whileHover:{scale:1.05},whileTap:{scale:.95},children:[a.jsx(s.img,{src:e.imageUrls[0],alt:e.title,className:"gallery-image",whileHover:{scale:1.1}}),a.jsxs(s.div,{className:"gallery-overlay",initial:{opacity:0},whileHover:{opacity:1},children:[a.jsx("h3",{className:"gallery-title",children:e.title}),e.category&&a.jsx("span",{className:"gallery-category",children:e.category}),e.imageUrls.length>1&&a.jsxs("div",{className:"gallery-badge",children:[e.imageUrls.length," photos"]})]})]},e._id))}),a.jsx(T,{mode:"wait",children:t&&a.jsx(s.div,{className:"gallery-backdrop",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:h,children:a.jsxs(s.div,{className:"gallery-card-container",initial:{scale:.5,opacity:0,y:50},animate:{scale:1,opacity:1,y:0},exit:{scale:.5,opacity:0,y:50},transition:{type:"spring",stiffness:200,damping:30},onClick:e=>e.stopPropagation(),children:[a.jsx(s.button,{className:"card-close-btn",onClick:h,whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},children:a.jsx(U,{})}),a.jsxs("div",{className:"gallery-card-image-wrapper",onTouchStart:E,onTouchMove:I,onTouchEnd:C,children:[a.jsx(T,{mode:"wait",children:a.jsx(s.img,{src:t.imageUrls[c],alt:t.title,className:"gallery-card-image",initial:{opacity:0,x:f>0?-100:100},animate:{opacity:1,x:0},exit:{opacity:0,x:f>0?100:-100},transition:{duration:.3}},c)}),g&&a.jsxs(a.Fragment,{children:[a.jsx(s.button,{className:"card-nav-btn card-nav-prev",onClick:e=>{e.stopPropagation(),y()},whileHover:{scale:1.1},whileTap:{scale:.9},children:a.jsx(L,{})}),a.jsx(s.button,{className:"card-nav-btn card-nav-next",onClick:e=>{e.stopPropagation(),m()},whileHover:{scale:1.1},whileTap:{scale:.9},children:a.jsx(H,{})})]}),g&&a.jsxs(s.div,{className:"image-counter",initial:{opacity:0},animate:{opacity:1},children:[c+1," / ",t.imageUrls.length]})]}),a.jsxs(s.div,{className:"gallery-card-content",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[a.jsxs("div",{children:[a.jsx("h3",{className:"card-title",children:t.title}),t.category&&a.jsx("span",{className:"card-category",children:t.category})]}),t.description&&a.jsx("p",{className:"card-description",children:t.description}),g&&a.jsx(s.div,{className:"card-indicators",children:t.imageUrls.map((e,i)=>a.jsx(s.button,{className:`indicator-dot ${i===c?"active":""}`,onClick:p=>{p.stopPropagation(),n(i)},whileHover:{scale:1.3}},i))})]})]})})})]})};export{z as default};
